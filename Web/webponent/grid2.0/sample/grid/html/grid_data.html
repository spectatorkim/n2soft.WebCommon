<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>데이터가저오기 - 그리드 webPonentⓒ Grid</title>
	<link rel="stylesheet" href="../../layout/css/layout.css"/>
	<link rel="stylesheet" type="text/css" href="../../../css/webponent.grid.css">
	<link rel="stylesheet" type="text/css" href="../../../css/webponent.grid.flat.css">
</head>
<body>
	<div class="wrapper">
		<h1>데이터가저오기</h1>

		<h2>API로 가저오기</h2>

		<fieldset class="search"><legend>스타일 변경</legend>
			<form name="frm" id="frm">
				<div class="input">
					<input id="row-start" class="text" type="text" value="3">번째 로우부터
					<input id="row-end" class="text" type="text" value="5">번째 로우까지 데이터
				</div>
				<div class="btn" style="top:15px;"><input type="button" value="가저오기" onclick="getRowData()"></div>
			</form>
		</fieldset>


		<div class="wrap">
			<div class="btnbox" style="top: -122px;">
				<button type="button" class="btn01" onclick="parent.location.href=document.location; return false;"><span>Mobile</span></button>
				<button type="button" class="btn02" onclick="window.open('http://build.cyber-i.com/docs/display/wp/API#API-getData'); return false;"><span>Reference</span></button>
				<button type="button" class="btn03" onclick="window.open('http://www.webponent.com/WEB-APP/webponent-publisher/#sample:Grid%20Demo/%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EA%B0%80%EC%A0%B8%EC%98%A4%EA%B8%B0'); return false;"><span>Publisher</span></button>
			</div>

			<h3>등락율 순위</h3>
			<table id="grid-table-1">

			</table>

			<script id="grid-template-1" type="text/template">
				<table width="100%" height="350px">
					<thead>
						<tr>
							<th name="indx" align="center">순위</th>
							<th name="Isu">종목명</th>
							<th name="NowPrc" align="right">현재가</th>
							<th name="PrdayCmp" align="right">전일비</th>
							<th name="Updn" align="right">등락율(%)</th>
							<th name="TopQty" align="right">거래량</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td name="indx" bind="indx"></td>
							<td name="Isu" bind="Isu"></td>
							<td name="NowPrc" bind="NowPrc"></td>
							<td name="PrdayCmp" bind="PrdayCmp"></td>
							<td name="Updn" bind="Updn"></td>
							<td name="TopQty" bind="TopQty"></td>
						</tr>
					</tbody>
				</table>
			</script>
			
		</div>

		<h2>그리드 객체로부터 가저오기</h2>

		<fieldset class="search"><legend>스타일 변경</legend>
			<form name="frm" id="frm">
				<div class="input">
					<input id="row-start-2" class="text" type="text" value="3">번째 로우부터
					<input id="row-end-2" class="text" type="text" value="5">번째 로우까지 데이터
				</div>
				<div class="btn" style="top:15px;"><input type="button" value="가저오기" onclick="getRowDataFromGridObject()"></div>
			</form>
		</fieldset>


		<div class="wrap">
			<div class="btnbox" style="top: -122px;">
				<button type="button" class="btn01" onclick="parent.location.href=document.location; return false;"><span>Mobile</span></button>
				<button type="button" class="btn02" onclick="window.open('http://build.cyber-i.com/docs/pages/viewpage.action?pageId=14615091#id-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B0%94%EC%9D%B8%EB%94%A9%2C%EB%AA%A8%EB%8D%B8-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%AA%A8%EB%8D%B8'); return false;"><span>Reference</span></button>
				<button type="button" class="btn03" onclick="window.open('http://www.webponent.com/WEB-APP/webponent-publisher/#sample:Chart%20Series/LINE-%EA%B8%B0%EB%B3%B8%20%ED%98%95%EC%8B%9D'); return false;"><span>Publisher</span></button>
			</div>

			<h3>등락율 순위</h3>
			<table id="grid-table-2">

			</table>

			<script id="grid-template-2" type="text/template">
				<table width="100%" height="350px">
					<thead>
						<tr>
							<th name="indx" align="center">순위</th>
							<th name="Isu">종목명</th>
							<th name="NowPrc" align="right">현재가</th>
							<th name="PrdayCmp" align="right">전일비</th>
							<th name="Updn" align="right">등락율(%)</th>
							<th name="TopQty" align="right">거래량</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td name="indx" bind="indx"></td>
							<td name="Isu" bind="Isu"></td>
							<td name="NowPrc" bind="NowPrc"></td>
							<td name="PrdayCmp" bind="PrdayCmp"></td>
							<td name="Updn" bind="Updn"></td>
							<td name="TopQty" bind="TopQty"></td>
						</tr>
					</tbody>
				</table>
			</script>
			
		</div>
		
	</div>

	
	<script src="../../../external/jquery-1.11.1.min.js"></script>
	<script src="../../../external/jquery-ui-1.10.3.custom.min.js"></script>
	<script src="../../../external/jquery.mousewheel.min.js"></script>
	<script src="../../../external/underscore-min.js"></script>
	<script src="../../../webponent.grid.js"></script>
	<script src="../../../webponent.grid.UIplugin.js"></script>

	<script>

	//json2.js
	if(typeof JSON!=="object"){JSON={}}(function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){escapable.lastIndex=0;return escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];if(a&&typeof a==="object"&&typeof a.toJSON==="function"){a=a.toJSON(e)}if(typeof rep==="function"){a=rep.call(t,e,a)}switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a){return"null"}gap+=indent;u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1){u[n]=str(n,a)||"null"}i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]";gap=o;return i}if(rep&&typeof rep==="object"){s=rep.length;for(n=0;n<s;n+=1){if(typeof rep[n]==="string"){r=rep[n];i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}else{for(r in a){if(Object.prototype.hasOwnProperty.call(a,r)){i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}";gap=o;return i}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx,escapable,gap,indent,meta,rep;if(typeof JSON.stringify!=="function"){escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.stringify=function(e,t,n){var r;gap="";indent="";if(typeof n==="number"){for(r=0;r<n;r+=1){indent+=" "}}else if(typeof n==="string"){indent=n}rep=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":e})}}if(typeof JSON.parse!=="function"){cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i==="object"){for(n in i){if(Object.prototype.hasOwnProperty.call(i,n)){r=walk(i,n);if(r!==undefined){i[n]=r}else{delete i[n]}}}}return reviver.call(e,t,i)}var j;text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})()

	var table1 = $('#grid-table-1');
	var template1 = $('#grid-template-1');
	var grid1 = webponent.grid.init(table1, template1);
	
	$.ajax({
		dataType : 'json',
		url : '../../../data/ranking-map.json',
		success : function (resp) {

			grid1.appendRow(resp);
		}
	});

	function getRowData () {

		var index1 = parseInt($('#row-start').val()) - 1;
		var index2 = parseInt($('#row-end').val()) - 1;
		
		var data = grid1.getData(index1, index2);

		alert(JSON.stringify(data));
	}

	var table2 = $('#grid-table-2');
	var template2 = $('#grid-template-2');
	var grid2 = webponent.grid.init(table2, template2);
	
	$.ajax({
		dataType : 'json',
		url : '../../../data/ranking-map.json',
		success : function (resp) {

			grid2.appendRow(resp);
		}
	});

	function getRowDataFromGridObject () {
		
		var data = grid2.data;

		var index1 = parseInt($('#row-start-2').val()) - 1;
		var index2 = parseInt($('#row-end-2').val()) - 1;

		var indexedData = data.slice(index1, index2);

		alert(JSON.stringify(indexedData));

	}
	</script>
</body>
</html>
